@prefix general: <https://github.com/GAIA-X4PLC-AAD/ontology-management-base/tree/main/general/> .
@prefix gx: <https://registry.lab.gaia-x.eu/development/api/trusted-shape-registry/v1/shapes/jsonld/trustframework#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

general:GeneralShape a sh:NodeShape ;
    sh:property [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:node general:DescriptionShape ;
            sh:order 1 ;
            sh:path general:Description ], 
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:node gx:DataResource ;
            sh:order 2 ;
            sh:path general:DataResource ],            
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:node general:LinksShape ;
            sh:order 3 ;
            sh:path general:Links ],         
        [ sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:node general:BundleDataShape ;
            sh:order 4 ;
            sh:path general:BundleData ];
    sh:targetClass general:General .
    
general:DescriptionShape a sh:NodeShape ;
    sh:property [ sh:datatype xsd:string ;
            sh:description "A human readable name of the entity." ;
            skos:example "3D Model in Grafing" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "name" ;
            sh:order 1 ;
            sh:path gx:name ],
        [ sh:datatype xsd:string ;
            sh:description "A free text description of the entity." ;
            skos:example "town district, with traffic signs" ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "description" ;
            sh:order 2 ;
            sh:path gx:description ];
    sh:targetClass general:Description .    
    
general:BundleDataShape a sh:NodeShape ;
    sh:property [ sh:node general:LinkShape ;
            sh:description "Reference to required assets" ;
            skos:example "for scenario, link to required hd map" ;
            sh:name "requiredData" ;
            sh:order 1 ;
            sh:path gx:requiredData ],
        [ sh:node general:LinkShape ;
            sh:description "Reference to optional related assets" ;
            skos:example "at hd map, link to optional surface map" ;
            sh:name "releatedData" ;
            sh:order 2 ;
            sh:path gx:releatedData ];
    sh:targetClass general:BundleData .    

general:LinksShape a sh:NodeShape ;
    sh:property [ skos:example "link to bundle data, screenshot, video, routing, 3d preview" ;
            sh:description "Reference to media data"@en ;
            sh:message "Validation of media failed!"@en ;
            sh:name "media"@en ;
            sh:node general:LinkShape ;
            sh:order 2 ;
            sh:path general:media ],
        [ skos:example "link to data asset, e.g. hd map" ;
            sh:description "Reference to the data asset as url/uri of the EDC"@en ;
            sh:message "Validation of data failed!"@en ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:name "data"@en ;
            sh:node general:LinkShape ;
            sh:order 1 ;
            sh:path general:data ];
    sh:targetClass general:Links .

general:LinkShape a sh:NodeShape ;
    sh:property [ sh:datatype xsd:string ;
            sh:in ("Document" "Image" "Model" "Routing" "Video", "3DPreview", "Asset") ;
            sh:message "Validation of type failed!"@en ;
            sh:description "Choose type of link." ;
            sh:name "type"@en ;
            sh:order 1 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path general:type ],
        [ sh:datatype xsd:anyURI ;
            sh:message "Validation of url failed!"@en ;
            sh:description "Enter link as URL or DID." ;
            sh:name "url"@en ;
            sh:order 0 ;
            sh:maxCount 1 ;
            sh:minCount 1 ;
            sh:path general:url ] ;
    sh:targetClass general:Link .